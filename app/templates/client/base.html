<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DENIZ Restaurant{% endblock %}</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='assets/images/logo.svg') }}">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/client/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/client/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/client/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/client/modals.css') }}">
    {% block extra_css %}{% endblock %}
    
    <!-- Meta для планшетов -->
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
</head>
<body class="tablet-layout" data-theme="light">
    
    <!-- Основной контейнер -->
    <div class="app-container">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <div class="logo">
                    <img src="{{ url_for('static', filename='assets/images/logo.svg') }}" alt="DENIZ" class="logo-image">
                </div>
            </div>
            
            <div class="header-center">
                <div class="search-container">
                    <input type="text" 
                           class="search-input" 
                           placeholder="Введите название блюда"
                           id="dishSearch">
                    <button class="search-btn" type="button">
                        <img src="{{ url_for('static', filename='assets/images/search.svg') }}" alt="Поиск" class="search-icon">
                    </button>
                </div>
            </div>
            
            <div class="header-right">
                <button class="theme-toggle" id="themeToggle" aria-label="Переключить тему">
                    <img src="{{ url_for('static', filename='assets/images/moon.svg') }}" alt="Темная тема" class="theme-icon moon">
                    <img src="{{ url_for('static', filename='assets/images/sun.svg') }}" alt="Светлая тема" class="theme-icon sun" style="display: none;">
                </button>
                
                <div class="language-selector">
                    <button class="lang-btn" data-lang="tm">TM</button>
                    <button class="lang-btn active" data-lang="ru">РУ</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="app-main">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="categories-menu" id="categoriesMenu">
                    <!-- Категории будут загружены динамически -->
                </div>
            </aside>
            
            <!-- Content Area -->
            <section class="content-area">
                {% block content %}{% endblock %}
            </section>
            
            <!-- Cart Sidebar -->
            <aside class="cart-sidebar">
                <div class="cart-header">
                    <h3 class="cart-title">Корзина</h3>
                    <div class="table-selector">
                        <button class="table-select-btn" id="tableSelectBtn">
                            <span class="table-text">Стол #<span id="currentTableNumber">10</span></span>
                            <svg class="dropdown-icon" viewBox="0 0 24 24">
                                <path d="M7,10L12,15L17,10H7Z"/>
                            </svg>
                        </button>
                    </div>
                    <button class="clear-cart-btn" id="clearCartBtn">Очистить</button>
                </div>
                
                <div class="cart-content" id="cartContent">
                    <!-- Содержимое корзины -->
                    <div class="empty-cart">
                        <div class="empty-cart-illustration">
                            <img src="{{ url_for('static', filename='assets/images/fish.png') }}" alt="Рыба" class="fish-image">
                        </div>
                        <p class="empty-cart-text">
                            Корзина пуста, но море полное.<br>
                            Загляните в меню — там волны вкуса.
                        </p>
                    </div>
                    
                    <!-- Rudder pattern -->
                    <div class="rudder-pattern">
                        <!-- SVG будет загружен из assets/rudder.svg -->
                    </div>
                </div>
                
                <div class="cart-footer" id="cartFooter" style="display: none;">
                    <!-- Итоги и кнопки -->
                </div>
            </aside>
        </main>
    </div>
    
    <!-- Модальные окна -->
    <div class="modal-overlay" id="modalOverlay"></div>
    
    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/client/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/client/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/client/language.js') }}"></script>
    <script src="{{ url_for('static', filename='js/client/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/client/cart.js') }}"></script>
    <script src="{{ url_for('static', filename='js/client/search.js') }}"></script>
    <script src="{{ url_for('static', filename='js/client/modals.js') }}"></script>
    {% block extra_js %}{% endblock %}
    
    <!-- Initialize App -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация приложения
            ClientApp.init();
        });
    </script>
</body>
</html>